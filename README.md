# Homebridge KituramiDCMat
블루투스 연결을 지원하는 귀뚜라미 카본매트용 Homebridge 플러그인입니다.

현재 전원 켜기/끄기만을 지원합니다. 온도 조절 및 모드 변경 등의 기능은 지원하지 않습니다.

# 요구사항
* [Homebridge](https://homebridge.io/)
* gatttool이 설치된 Linux 환경

# 지원 제품
작동 확인이 되지 않은 제품은 지원될 가능성이 있으나 아직 확인이 되지 않은 것입니다.

**온도 제어가 지원되지 않는 제품에서 온도 제어를 사용하지 마세요!**

* KDM-851 - 작동 확인 / 온도 제어 지원
* KDM-852 - 작동 확인 안됨 / 온도 제어 지원 안됨
* KDM-853 - 작동 확인 안됨 / 온도 제어 지원 안됨
* KDM-871 - 작동 확인 안됨 / 온도 제어 지원 안됨 (지원될 가능성 있음. 확인 필요)
* KDM-872 - 작동 확인 안됨 / 온도 제어 지원 안됨
* KDM-873 - 작동 확인 안됨 / 온도 제어 지원 안됨

본인의 기기가 지원되지 않거나 온도 제어가 지원되지 않는 경우 블루투스 패킷 스니퍼를 이용하여
앱 조작시 기기에 쓰는 값을 기록해 저에게 알려주시면 지원이 가능합니다.

# 알림
이 플러그인은 BLE 연결을 사용하므로 업데이트 및 동작 속도가 느린 편입니다. 
따라서 브리지에 연결된 모든 액세서리의 업데이트가 느려질 수 있습니다. 
이를 방지하려면 별도의 브리지를 사용하세요.

# 설정
Homebridge Config UI X 를 사용할 경우 웹 UI 상의 설정을 지원합니다.

해당 플러그인을 사용하지 않을 경우 아래를 참조하세요.

```json
"accessories": [
  {
    "accessory": "KituramiDCMat",
    "name": "귀뚜라미 카본매트",
    "btAddress": "XX:XX:XX:XX:XX:XX",
    "useTempControl": false,
    "useAltSwitch": false,
    "altSwitchName": "장판"    
  }
],
```

* ```accessory```: 해당 액세서리가 사용할 플러그인을 나타냅니다. 그대로 두세요.
* ```name```: 해당 액세서리가 홈 앱에서 나타날 이름입니다.
* ```address```: 제어할 매트의 블루투스 MAC 주소입니다.
* ```useTempControl```: 홈 앱에서 온도 제어를 사용할지의 여부입니다. 지원되는 제품에서만 사용하세요.
  - ```useAltSwitch```: 전원 제어용 스위치를 사용합지의 여부입니다. Siri로 전기매트를 켜거나 끌 때 유용합니다.
    - ```altSwitchName```: 전원 제어 스위치의 이름입니다.